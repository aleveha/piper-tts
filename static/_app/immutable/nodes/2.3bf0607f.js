import{n as J,s as se,f as re,e as Oe,h as be,i as Be,r as Le,o as je}from"../chunks/scheduler.9cc5c5a3.js";import{S as ne,i as ae,g as w,m as G,h as E,j as T,n as F,f as h,k as b,a as Q,y as u,z as j,o as Y,s as z,c as P,d as U,p as he,b as ve,t as H,A as Se,r as ue,u as de,v as fe,w as _e,l as we,B as Ee,x as Ae,C as ke,D as ze}from"../chunks/index.85fb7d3f.js";import{w as Ne}from"../chunks/index.29e40ca7.js";const Pe=typeof window<"u";let Ue=Pe?s=>requestAnimationFrame(s):J;const Me=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function ce(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}const Re=!0,qe=!1,rt=Object.freeze(Object.defineProperty({__proto__:null,prerender:Re,ssr:qe},Symbol.toStringTag,{value:"Module"})),ie=Ne(""),ge=Ne("en-us-libritts-high");function Ge(s){let e,t,l,n,a,o;return{c(){e=w("div"),t=w("button"),l=G(s[0]),this.h()},l(r){e=E(r,"DIV",{});var i=T(e);t=E(i,"BUTTON",{class:!0});var g=T(t);l=F(g,s[0]),g.forEach(h),i.forEach(h),this.h()},h(){b(t,"class",n=re(s[1]?"voice selected":"voice")+" svelte-1yygtbo"),t.disabled=s[1]},m(r,i){Q(r,e,i),u(e,t),u(t,l),a||(o=j(t,"click",s[2]),a=!0)},p(r,[i]){i&1&&Y(l,r[0]),i&2&&n!==(n=re(r[1]?"voice selected":"voice")+" svelte-1yygtbo")&&b(t,"class",n),i&2&&(t.disabled=r[1])},i:J,o:J,d(r){r&&h(e),a=!1,o()}}}function Fe(s,e,t){let{voiceLabel:l=""}=e,{disabled:n=!0}=e;const a=()=>{ge.set(l)};return s.$$set=o=>{"voiceLabel"in o&&t(0,l=o.voiceLabel),"disabled"in o&&t(1,n=o.disabled)},[l,n,a]}class He extends ne{constructor(e){super(),ae(this,e,Fe,Ge,se,{voiceLabel:0,disabled:1})}}function De(s,e,t){const l=s.slice();return l[5]=e[t],l}function Te(s){let e,t;return e=new He({props:{disabled:s[2]===s[5],voiceLabel:s[5]}}),{c(){ue(e.$$.fragment)},l(l){de(e.$$.fragment,l)},m(l,n){fe(e,l,n),t=!0},p(l,n){const a={};n&5&&(a.disabled=l[2]===l[5]),n&1&&(a.voiceLabel=l[5]),e.$set(a)},i(l){t||(U(e.$$.fragment,l),t=!0)},o(l){H(e.$$.fragment,l),t=!1},d(l){_e(e,l)}}}function Xe(s){let e,t,l=s[0].langCode+"",n,a,o,r,i,g,V,A,I=ce(s[0].voices),c=[];for(let d=0;d<I.length;d+=1)c[d]=Te(De(s,I,d));const C=d=>H(c[d],1,1,()=>{c[d]=null});return{c(){e=w("div"),t=w("button"),n=G(l),o=z(),r=w("div");for(let d=0;d<c.length;d+=1)c[d].c();this.h()},l(d){e=E(d,"DIV",{});var p=T(e);t=E(p,"BUTTON",{class:!0});var f=T(t);n=F(f,l),f.forEach(h),o=P(p),r=E(p,"DIV",{class:!0});var O=T(r);for(let L=0;L<c.length;L+=1)c[L].l(O);O.forEach(h),p.forEach(h),this.h()},h(){b(t,"class",a=re(s[1]?"language selected":" language")+" svelte-f41jw3"),b(r,"class","voices svelte-f41jw3"),r.hidden=i=!s[1]},m(d,p){Q(d,e,p),u(e,t),u(t,n),u(e,o),u(e,r);for(let f=0;f<c.length;f+=1)c[f]&&c[f].m(r,null);g=!0,V||(A=j(t,"click",s[4]),V=!0)},p(d,[p]){if((!g||p&1)&&l!==(l=d[0].langCode+"")&&Y(n,l),(!g||p&2&&a!==(a=re(d[1]?"language selected":" language")+" svelte-f41jw3"))&&b(t,"class",a),p&5){I=ce(d[0].voices);let f;for(f=0;f<I.length;f+=1){const O=De(d,I,f);c[f]?(c[f].p(O,p),U(c[f],1)):(c[f]=Te(O),c[f].c(),U(c[f],1),c[f].m(r,null))}for(he(),f=I.length;f<c.length;f+=1)C(f);ve()}(!g||p&2&&i!==(i=!d[1]))&&(r.hidden=i)},i(d){if(!g){for(let p=0;p<I.length;p+=1)U(c[p]);g=!0}},o(d){c=c.filter(Boolean);for(let p=0;p<c.length;p+=1)H(c[p]);g=!1},d(d){d&&h(e),Se(c,d),V=!1,A()}}}function Je(s,e,t){let l;Oe(s,ie,i=>t(3,l=i));let{language:n}=e,{expanded:a=!1}=e,o;ge.subscribe(i=>{t(2,o=i)});const r=()=>{l===n.langCode?ie.set(""):ie.set(n.langCode)};return s.$$set=i=>{"language"in i&&t(0,n=i.language),"expanded"in i&&t(1,a=i.expanded)},[n,a,o,l,r]}class Ke extends ne{constructor(e){super(),ae(this,e,Je,Xe,se,{language:0,expanded:1})}}const{isNaN:Qe}=Me;function We(s){let e,t,l,n=!1,a,o=!0,r,i,g,V,A,I,c,C,d,p,f,O,L,S,M=oe(s[3])+"",K,Z,R,N,$,y,B=(s[4]?oe(s[4]):"--:--")+"",D,ee,v;function m(){cancelAnimationFrame(a),t.paused||(a=Ue(m),n=!0),s[6].call(t)}return{c(){e=w("div"),t=w("audio"),r=z(),i=w("button"),V=z(),A=w("div"),I=w("div"),c=w("strong"),C=G(s[1]),d=G(` /
			`),p=w("span"),f=G(s[2]),O=z(),L=w("div"),S=w("span"),K=G(M),Z=z(),R=w("div"),N=w("div"),$=z(),y=w("span"),D=G(B),this.h()},l(k){e=E(k,"DIV",{class:!0});var _=T(e);t=E(_,"AUDIO",{src:!0}),T(t).forEach(h),r=P(_),i=E(_,"BUTTON",{class:!0,"aria-label":!0}),T(i).forEach(h),V=P(_),A=E(_,"DIV",{class:!0});var q=T(A);I=E(q,"DIV",{class:!0});var W=T(I);c=E(W,"STRONG",{});var te=T(c);C=F(te,s[1]),te.forEach(h),d=F(W,` /
			`),p=E(W,"SPAN",{});var le=T(p);f=F(le,s[2]),le.forEach(h),W.forEach(h),O=P(q),L=E(q,"DIV",{class:!0});var X=T(L);S=E(X,"SPAN",{class:!0});var x=T(S);K=F(x,M),x.forEach(h),Z=P(X),R=E(X,"DIV",{class:!0});var pe=T(R);N=E(pe,"DIV",{class:!0,style:!0}),T(N).forEach(h),pe.forEach(h),$=P(X),y=E(X,"SPAN",{class:!0});var me=T(y);D=F(me,B),me.forEach(h),X.forEach(h),q.forEach(h),_.forEach(h),this.h()},h(){be(t.src,l=s[0])||b(t,"src",l),s[4]===void 0&&Be(()=>s[7].call(t)),b(i,"class","play svelte-x8khxs"),b(i,"aria-label",g=s[5]?"play":"pause"),b(I,"class","description svelte-x8khxs"),b(S,"class","svelte-x8khxs"),b(N,"class","progress svelte-x8khxs"),we(N,"--progress",s[3]/s[4]+"%"),b(R,"class","slider svelte-x8khxs"),b(y,"class","svelte-x8khxs"),b(L,"class","time svelte-x8khxs"),b(A,"class","info svelte-x8khxs"),b(e,"class","player svelte-x8khxs"),Ee(e,"paused",s[5])},m(k,_){Q(k,e,_),u(e,t),u(e,r),u(e,i),u(e,V),u(e,A),u(A,I),u(I,c),u(c,C),u(I,d),u(I,p),u(p,f),u(A,O),u(A,L),u(L,S),u(S,K),u(L,Z),u(L,R),u(R,N),u(L,$),u(L,y),u(y,D),ee||(v=[j(t,"timeupdate",m),j(t,"durationchange",s[7]),j(t,"play",s[8]),j(t,"pause",s[8]),j(t,"ended",s[9]),j(i,"click",s[10]),j(R,"pointerdown",s[11])],ee=!0)},p(k,[_]){_&1&&!be(t.src,l=k[0])&&b(t,"src",l),!n&&_&8&&!Qe(k[3])&&(t.currentTime=k[3]),n=!1,_&32&&o!==(o=k[5])&&t[o?"pause":"play"](),_&32&&g!==(g=k[5]?"play":"pause")&&b(i,"aria-label",g),_&2&&Y(C,k[1]),_&4&&Y(f,k[2]),_&8&&M!==(M=oe(k[3])+"")&&Y(K,M),_&24&&we(N,"--progress",k[3]/k[4]+"%"),_&16&&B!==(B=(k[4]?oe(k[4]):"--:--")+"")&&Y(D,B),_&32&&Ee(e,"paused",k[5])},i:J,o:J,d(k){k&&h(e),ee=!1,Le(v)}}}function oe(s){if(isNaN(s))return"...";const e=Math.floor(s/60),t=Math.floor(s%60);return`${e}:${t<10?`0${t}`:t}`}function Ye(s,e,t){let{src:l}=e,{title:n}=e,{artist:a}=e,o=0,r=0,i=!0;function g(){o=this.currentTime,t(3,o)}function V(){r=this.duration,t(4,r)}function A(){i=this.paused,t(5,i)}const I=()=>{t(3,o=0)},c=()=>t(5,i=!i),C=d=>{const p=d.currentTarget;function f(){const{left:O,width:L}=p.getBoundingClientRect();let S=(d.clientX-O)/L;S<0&&(S=0),S>1&&(S=1),t(3,o=S*r)}f(),window.addEventListener("pointermove",f),window.addEventListener("pointerup",()=>{window.removeEventListener("pointermove",f)},{once:!0})};return s.$$set=d=>{"src"in d&&t(0,l=d.src),"title"in d&&t(1,n=d.title),"artist"in d&&t(2,a=d.artist)},[l,n,a,o,r,i,g,V,A,I,c,C]}class Ze extends ne{constructor(e){super(),ae(this,e,Ye,We,se,{src:0,title:1,artist:2})}}function Ve(s,e,t){const l=s.slice();return l[10]=e[t],l}function $e(s){let e,t="Loading...";return{c(){e=w("div"),e.textContent=t},l(l){e=E(l,"DIV",{["data-svelte-h"]:!0}),Ae(e)!=="svelte-194gxkm"&&(e.textContent=t)},m(l,n){Q(l,e,n)},p:J,i:J,o:J,d(l){l&&h(e)}}}function xe(s){let e,t;return e=new Ze({props:{src:s[3],title:s[4],artist:s[2]}}),{c(){ue(e.$$.fragment)},l(l){de(e.$$.fragment,l)},m(l,n){fe(e,l,n),t=!0},p(l,n){const a={};n&8&&(a.src=l[3]),n&16&&(a.title=l[4]),n&4&&(a.artist=l[2]),e.$set(a)},i(l){t||(U(e.$$.fragment,l),t=!0)},o(l){H(e.$$.fragment,l),t=!1},d(l){_e(e,l)}}}function Ie(s){let e,t,l,n;return{c(){e=w("div"),t=w("a"),l=G("Download"),this.h()},l(a){e=E(a,"DIV",{});var o=T(e);t=E(o,"A",{href:!0,download:!0});var r=T(t);l=F(r,"Download"),r.forEach(h),o.forEach(h),this.h()},h(){b(t,"href",s[3]),b(t,"download",n=new Date().toDateString()+"-"+s[2]+".wav")},m(a,o){Q(a,e,o),u(e,t),u(t,l)},p(a,o){o&8&&b(t,"href",a[3]),o&4&&n!==(n=new Date().toDateString()+"-"+a[2]+".wav")&&b(t,"download",n)},d(a){a&&h(e)}}}function ye(s){let e,t;return e=new Ke({props:{expanded:s[10].langCode===s[1],language:s[10]}}),{c(){ue(e.$$.fragment)},l(l){de(e.$$.fragment,l)},m(l,n){fe(e,l,n),t=!0},p(l,n){const a={};n&3&&(a.expanded=l[10].langCode===l[1]),n&1&&(a.language=l[10]),e.$set(a)},i(l){t||(U(e.$$.fragment,l),t=!0)},o(l){H(e.$$.fragment,l),t=!1},d(l){_e(e,l)}}}function et(s){let e,t,l,n,a,o,r,i,g,V,A,I,c,C,d,p,f,O="Generate Audio",L,S,M,K,Z;const R=[xe,$e],N=[];function $(v,m){return v[3]?0:v[5]?1:-1}~(g=$(s))&&(V=N[g]=R[g](s));let y=s[3]&&Ie(s),B=ce(s[0]),D=[];for(let v=0;v<B.length;v+=1)D[v]=ye(Ve(s,B,v));const ee=v=>H(D[v],1,1,()=>{D[v]=null});return{c(){e=w("div"),t=w("div"),l=w("div"),n=G("Selected Voice: "),a=w("b"),o=G(s[2]),r=z(),i=w("div"),V&&V.c(),A=z(),y&&y.c(),I=z(),c=w("div"),C=w("textarea"),d=z(),p=w("div"),f=w("button"),f.textContent=O,L=z(),S=w("div");for(let v=0;v<D.length;v+=1)D[v].c();this.h()},l(v){e=E(v,"DIV",{class:!0});var m=T(e);t=E(m,"DIV",{class:!0});var k=T(t);l=E(k,"DIV",{});var _=T(l);n=F(_,"Selected Voice: "),a=E(_,"B",{});var q=T(a);o=F(q,s[2]),q.forEach(h),_.forEach(h),k.forEach(h),r=P(m),i=E(m,"DIV",{});var W=T(i);V&&V.l(W),W.forEach(h),A=P(m),y&&y.l(m),I=P(m),c=E(m,"DIV",{class:!0});var te=T(c);C=E(te,"TEXTAREA",{class:!0}),T(C).forEach(h),te.forEach(h),d=P(m),p=E(m,"DIV",{class:!0});var le=T(p);f=E(le,"BUTTON",{class:!0,["data-svelte-h"]:!0}),Ae(f)!=="svelte-yfxoh5"&&(f.textContent=O),le.forEach(h),L=P(m),S=E(m,"DIV",{class:!0});var X=T(S);for(let x=0;x<D.length;x+=1)D[x].l(X);X.forEach(h),m.forEach(h),this.h()},h(){b(t,"class","voicesel svelte-1izv0me"),b(C,"class","svelte-1izv0me"),b(c,"class","txt svelte-1izv0me"),b(f,"class","svelte-1izv0me"),b(p,"class","genbtn svelte-1izv0me"),b(S,"class","lang svelte-1izv0me"),b(e,"class","tts svelte-1izv0me")},m(v,m){Q(v,e,m),u(e,t),u(t,l),u(l,n),u(l,a),u(a,o),u(e,r),u(e,i),~g&&N[g].m(i,null),u(e,A),y&&y.m(e,null),u(e,I),u(e,c),u(c,C),ke(C,s[4]),u(e,d),u(e,p),u(p,f),u(e,L),u(e,S);for(let k=0;k<D.length;k+=1)D[k]&&D[k].m(S,null);M=!0,K||(Z=[j(C,"keydown",s[7]),j(C,"input",s[8]),j(f,"click",s[9])],K=!0)},p(v,[m]){(!M||m&4)&&Y(o,v[2]);let k=g;if(g=$(v),g===k?~g&&N[g].p(v,m):(V&&(he(),H(N[k],1,1,()=>{N[k]=null}),ve()),~g?(V=N[g],V?V.p(v,m):(V=N[g]=R[g](v),V.c()),U(V,1),V.m(i,null)):V=null),v[3]?y?y.p(v,m):(y=Ie(v),y.c(),y.m(e,I)):y&&(y.d(1),y=null),m&16&&ke(C,v[4]),m&3){B=ce(v[0]);let _;for(_=0;_<B.length;_+=1){const q=Ve(v,B,_);D[_]?(D[_].p(q,m),U(D[_],1)):(D[_]=ye(q),D[_].c(),U(D[_],1),D[_].m(S,null))}for(he(),_=B.length;_<D.length;_+=1)ee(_);ve()}},i(v){if(!M){U(V);for(let m=0;m<B.length;m+=1)U(D[m]);M=!0}},o(v){H(V),D=D.filter(Boolean);for(let m=0;m<D.length;m+=1)H(D[m]);M=!1},d(v){v&&h(e),~g&&N[g].d(),y&&y.d(),Se(D,v),K=!1,Le(Z)}}}let Ce="";function tt(s){const e=[];return s.forEach(t=>{const l=t.split("-")[0],n=e.find(o=>o.langCode===l),a=t.replace(".onnx","");n?n.voices.push(a):e.push({voices:[a],langCode:l})}),e}function lt(s,e,t){let l=[],n,a,o,r="Hello this is a test string. Change this, select a language/voice and click 'Generate Audio'.",i=!1;async function g(){if(t(5,i=!0),r.length===0)return;let C=await(await fetch(Ce+"/api/tts",{method:"POST",body:JSON.stringify({text:r,voice:a+".onnx"})})).blob();t(3,o=window.URL.createObjectURL(C)),t(5,i=!1)}ie.subscribe(c=>{t(1,n=c)}),ge.subscribe(c=>{t(3,o=void 0),t(2,a=c)}),je(async()=>{t(5,i=!0);const c=await fetch(Ce+"/api/voices");t(0,l=tt(await c.json())),t(5,i=!1)});const V=()=>{t(3,o=void 0)};function A(){r=this.value,t(4,r)}return[l,n,a,o,r,i,g,V,A,()=>{g()}]}class st extends ne{constructor(e){super(),ae(this,e,lt,et,se,{})}}function nt(s){let e,t,l,n,a;return n=new st({}),{c(){e=w("meta"),t=z(),l=w("section"),ue(n.$$.fragment),this.h()},l(o){const r=ze("svelte-t32ptj",document.head);e=E(r,"META",{name:!0,content:!0}),r.forEach(h),t=P(o),l=E(o,"SECTION",{class:!0});var i=T(l);de(n.$$.fragment,i),i.forEach(h),this.h()},h(){document.title="Home",b(e,"name","description"),b(e,"content","Svelte demo app"),b(l,"class","svelte-7w87tm")},m(o,r){u(document.head,e),Q(o,t,r),Q(o,l,r),fe(n,l,null),a=!0},p:J,i(o){a||(U(n.$$.fragment,o),a=!0)},o(o){H(n.$$.fragment,o),a=!1},d(o){o&&(h(t),h(l)),h(e),_e(n)}}}class ct extends ne{constructor(e){super(),ae(this,e,null,nt,se,{})}}export{ct as component,rt as universal};
